<!DOCTYPE html>
<html lang="he" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
  <title>Color Grid App</title>

  <meta property="og:type" content="website">
  <meta property="og:url" content="https://tomerrrr-create.github.io/color-grid-app/">
  <meta property="og:title" content="Follow Your Intuition">
  <meta property="og:description" content="----------------">
  <meta property="og:image" content="https://raw.githubusercontent.com/tomerrrr-create/color-grid-app/refs/heads/main/og.PNG">
  <meta property="og:locale" content="en_US" />

  <meta name="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://tomerrrr-create.github.io/color-grid-app/">
  <meta name="twitter:title" content="Follow Your Intuition">
  <meta name="twitter:description" content="----------------">
  <meta name="twitter:image" content="https://raw.githubusercontent.com/tomerrrr-create/color-grid-app/refs/heads/main/og.PNG">
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-black text-[#eaeaea] font-sans">

  <div id="splashScreen" class="fixed inset-0 bg-black flex items-center justify-center z-[1000]">
    <h1 id="splashText" class="text-3xl" style="color: black; opacity: 0;"></h1>
  </div>

  <div id="appContainer" class="min-h-screen flex flex-col items-center justify-start p-6 pt-10 sm:pt-12">
    <div class="w-full max-w-[720px] mx-auto app-shell">
      
      <div class="relative">
        <div id="board" class="board bg-black border-black" aria-label="Color Grid" role="grid">
            </div>
        <div id="boardOverlay" class="absolute inset-0 bg-black opacity-0 pointer-events-none"></div>
        
        <div id="longPressOverlay" class="absolute inset-0 pointer-events-none"></div>
        <div id="longPressDisplay" class="absolute inset-0 flex flex-col items-center justify-center gap-8 sm:gap-12 pointer-events-none">
        </div>
      </div>

      <div id="controlsContainer" class="mt-11" aria-label="Control buttons">
          
          <button id="btnShowBreatheMenu" class="ctrl">
              <svg viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <path d="M3 12 C3 9 9 9 12 12 S 15 15 21 12"></path>
              </svg>
          </button>
           <button id="btnDark" class="ctrl">
              <span class="glyph-dark"></span>
          </button>
          <button id="btnSave" class="ctrl">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <path d="M12 4v12"></path>
                  <path d="m16 12-4 4-4-4"></path>
              </svg>
          </button>
          <button id="btnTutorial" class="ctrl">
              <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <text x="12" y="17.5" text-anchor="middle" style="font-family: Arial, sans-serif; font-weight: bold; font-size: 11px;">WTF</text>
              </svg>
          </button>

          <button id="btnInvert" class="ctrl">
              <span class="glyph glyph-invert" aria-hidden="true"></span>
          </button>
          <button id="btnPalette" class="ctrl palette"></button>
          <button id="btnRandom" class="ctrl">
              <span class="glyph glyph-random" aria-hidden="true"></span>
          </button>
          
          <button id="btnColorPicker" class="ctrl">
              <svg viewBox="0 0 24 24" stroke-width="2">
                  <circle cx="12" cy="12" r="8"></circle>
              </svg>
          </button>
          <button id="btnSymmetry" class="ctrl">
              <svg viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" aria-hidden="true">
                  <rect x="3" y="3" width="18" height="18" fill="none" stroke="#424242" />
                  <path class="part top" d="M3 3 H 21" stroke="transparent" />
                  <path class="part bottom" d="M3 21 H 21" stroke="transparent" />
                  <path class="part left" d="M3 3 V 21" stroke="transparent" />
                  <path class="part right" d="M21 3 V 21" stroke="transparent" />
                  <circle class="part center-dot" cx="12" cy="12" r="2" fill="transparent" />
              </svg>
          </button>
          <button id="btnBrushMode" class="ctrl">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M12 2 L2 22 L22 22 Z" stroke="#fff" stroke-width="2" fill="#000" />
              </svg>
          </button>

          <button id="btnRedo" class="ctrl">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <path d="M21 10v4c0 1.1-.9 2-2 2h-7"/>
                  <path d="M21 10l-4-4-4 4"/>
              </svg>
          </button>
          <button id="btnSpecialReset" class="ctrl">
              <span class="glyph-special-reset"></span>
          </button>
          <button id="btnUndo" class="ctrl">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <path d="M3 10v4c0 1.1.9 2 2 2h7"/>
                  <path d="M3 10l4-4 4 4"/>
              </svg>
          </button>

<button id="btnGameOfLife" class="ctrl">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="0.8" stroke-linecap="round" stroke-linejoin="round">
        <ellipse cx="12" cy="7" rx="3" ry="5"></ellipse>
        <path d="M12 12v7"></path>
        <path d="M9 14h6"></path>
    </svg>
</button>

          <button id="btnToggleSimMode" class="ctrl">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" 
                   stroke-linecap="round" stroke-linejoin="round" style="transform: scale(0.8);">
                  <circle cx="12" cy="12" r="1"></circle>
                  <ellipse cx="12" cy="12" rx="10" ry="4" transform="rotate(45 12 12)"></ellipse>
              </svg>
          </button>
          <button id="btnBrightnessEvo" class="ctrl">
              <svg viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" style="transform: scale(0.8); transform-origin: center;">
                  <circle cx="12" cy="12" r="3"></circle>
                  <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41"></path>
              </svg>
          </button>

          <button id="btnResizeUp" class="ctrl">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m6-6H6" />
              </svg>
          </button>
          <button id="btnResizeDown" class="ctrl">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M18 12H6" />
              </svg>
          </button>
          <button id="btnGap" class="ctrl">
              <svg viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" aria-hidden="true">
                <path d="M8 3v18M16 3v18M3 8h18M3 16h18"/>
              </svg>
          </button>
          <button id="btnResetBoard" class="ctrl">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="6" r="3"></circle>
                  <line x1="12" y1="9" x2="12" y2="15"></line>
                  <line x1="12" y1="11" x2="7" y2="8"></line>
                  <line x1="12" y1="11" x2="17" y2="8"></line>
                  <line x1="12" y1="15" x2="9" y2="21"></line>
                  <line x1="12" y1="15" x2="15" y2="21"></line>
              </svg>
          </button>

          <button id="btnPlayPauseLife" class="ctrl control-hidden">
              <svg viewBox="0 0 24 24" fill="#fff" aria-hidden="true">
                  <path id="iconPlay" d="M8 5 V19 L19 12 Z"></path>
                  <path id="iconPause" d="M6 6 H10 V18 H6 Z M14 6 H18 V18 H14 Z" style="display: none;"></path>
              </svg>
          </button>
      </div>
      
      <div id="breatheExitContainer">
        <button id="btnExitBreathe"></button>
      </div>

    </div>
  </div>

  <div id="saveModal" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-50">
    <div class="bg-[#1c1c1c] rounded-lg p-6 max-w-sm w-full text-center relative">
      <button id="btnModalClose" class="absolute top-3 right-3 text-gray-400 hover:text-white">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
      </button>
      <img id="imagePreview" class="rounded-md mb-4 border-2 border-gray-600 max-w-full h-auto" src="" alt="Image Preview">
      <div class="mb-6 text-right">
        <label id="fileNameLabel" for="fileNameInput" class="block text-sm font-medium text-gray-300 mb-1"></label>
        <input type="text" id="fileNameInput" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
      </div>
      
      <div class="flex justify-center gap-4">
        <button id="btnSaveImage" class="save-tile" style="background-color: #D2691E;">
            <svg viewBox="0 0 24 24" stroke="black" stroke-width="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
            </svg>
        </button>
        <button id="btnSaveProjectIdea" class="save-tile" style="background-color: #CD853F;">
            <svg viewBox="0 0 24 24" stroke="black" stroke-width="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 18h6M10 22h4M12 2a5 5 0 0 0-5 5c0 2.4 1.2 4.5 3 5.7V17a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-4.3c1.8-1.2 3-3.3 3-5.7a5 5 0 0 0-5-5Z"></path>
            </svg>
        </button>
        <button id="btnLoadProjectIdea" class="save-tile" style="background-color: #8B3A3A;">
            <svg viewBox="0 0 24 24" fill="#B22222" stroke="black" stroke-width="2.5">
                <circle cx="12" cy="12" r="10"></circle>
            </svg>
        </button>
      </div>

      <input type="file" id="projectFileInput" accept=".json, .cga" style="display: none;" />
    </div>
  </div>

  <div id="breatheModal" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-50">
    <div class="bg-[#1c1c1c] rounded-lg p-6 max-w-xs w-full text-center relative">
        <button id="btnBreatheModalClose" class="absolute top-3 right-3 text-gray-400 hover:text-white">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
        </button>
        <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
            <button id="btnStartSoloBreathe" class="breathe-option-btn">
               <svg class="w-10 h-10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12 C3 6 9 6 12 12 S 15 18 21 12"></path></svg>
               <span id="breatheSoloLabel" class="text-sm mt-2 text-gray-300"></span>
            </button>
            <button id="btnStartGroupBreathe" class="breathe-option-btn">
              <svg class="w-10 h-10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 10 C3 4 9 4 12 10 S 15 16 21 10"></path><path d="M3 14 C3 8 9 8 12 14 S 15 20 21 14"></path></svg>
              <span id="breatheGroupLabel" class="text-sm mt-2 text-gray-300"></span>
            </button>
        </div>
    </div>
  </div>

  <div id="colorPickerModal" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-50">
    <div class="bg-black border border-gray-700 rounded-lg p-6 w-full max-w-xs sm:max-w-sm text-center relative flex flex-col">
        <div id="colorPickerHeader" class="flex items-center justify-center w-full mb-4">
            <button id="btnPrevPalette" class="p-2 rounded-full hover:bg-gray-700">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
            </button>
            <h2 id="colorPickerPaletteName" class="text-lg font-semibold mx-4 text-center flex-1 whitespace-nowrap overflow-hidden text-ellipsis flex justify-center"></h2>
            <button id="btnNextPalette" class="p-2 rounded-full hover:bg-gray-700">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
            </button>
        </div>
        <div id="colorPickerSwatches" class="grid grid-cols-5 gap-3 justify-center"></div>
        <div id="colorPickerPagination" class="flex justify-center items-center h-8 mt-4"></div>
    </div>
  </div>

  <div id="helpModal" class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-4 z-50">
    <div id="helpModalContentWrapper" class="relative bg-[#1c1c1c] rounded-lg p-6 w-full max-w-md max-h-[80vh] flex flex-col">
       <button id="btnLangToggle" class="absolute top-3 left-3 text-gray-400 hover:text-white text-sm font-bold"></button>
       <button id="btnHelpModalClose" class="absolute top-2 right-2 text-gray-400 hover:text-white">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
      </button>
      <div id="helpModalInnerContainer" class="flex flex-col min-h-0">
        <h2 id="helpModalTitle" class="text-xl font-bold text-center mb-4 text-gray-200"></h2>
        <p id="helpIntroText" class="text-base text-gray-400 italic text-center mb-6"></p>
        <div id="helpModalContent" class="overflow-y-auto space-y-4 pr-2 border-t border-gray-700 pt-4"></div>
      </div>
    </div>
  </div>

  <div id="resizeModal" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-50">
    <div class="bg-[#1c1c1c] rounded-lg p-6 max-w-xs w-full text-center relative">
        <button id="btnResizeModalClose" class="absolute top-3 right-3 text-gray-400 hover:text-white">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
        </button>
        <h2 id="resizeModalTitle" class="text-lg font-semibold mb-4"></h2>
        <p id="resizeModalPrompt" class="text-sm text-gray-400 mb-4"></p>
        <input type="number" id="resizeInput" class="bg-gray-700 border border-gray-600 text-white text-lg text-center rounded-lg focus:ring-gold-500 focus:border-gold-500 block w-full p-2.5" placeholder="5">
        <button id="btnConfirmResize" class="mt-6 w-full text-black font-bold py-2 px-4 rounded-lg"></button>
    </div>
  </div>

  <div id="paletteModal" class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-4 z-50">
    <div class="relative bg-[#1c1c1c] rounded-lg p-6 w-full max-w-lg max-h-[80vh] flex flex-col">
       <button id="btnPaletteModalClose" class="absolute top-2 right-2 text-gray-400 hover:text-white">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
      </button>
      <h2 id="paletteModalTitle" class="text-xl font-bold text-center mb-4 text-gray-200"></h2>
      <div id="paletteModalGrid" class="overflow-y-auto grid grid-cols-2 sm:grid-cols-3 gap-4 p-2">
      </div>
    </div>
  </div>

  <div id="gameOfLifeSettingsModal" class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-4 z-50" style="display: none;">
    <div class="relative bg-[#1c1c1c] rounded-lg p-6 w-full max-w-md flex flex-col gap-6">
      <h2 id="golSettingsTitle" class="text-xl font-bold text-center text-gray-200">הגדרת חוקים למשחק החיים</h2>
      
      <div class="flex flex-col gap-2">
        <h3 class="font-semibold text-gray-300">כללי הישרדות</h3>
        <p class="text-sm text-gray-400">תא חי ימשיך לחיות אם מספר שכניו בטווח זה:</p>
        <div class="flex items-center justify-center gap-4">
          <input type="number" id="golSurvivalMin" class="bg-gray-700 border border-gray-600 text-white text-center rounded-lg w-20 p-2">
          <span class="text-gray-400">עד</span>
          <input type="number" id="golSurvivalMax" class="bg-gray-700 border border-gray-600 text-white text-center rounded-lg w-20 p-2">
        </div>
      </div>

      <div class="flex flex-col gap-2">
        <h3 class="font-semibold text-gray-300">כללי לידה</h3>
        <p class="text-sm text-gray-400">תא מת ייוולד אם יש לו מספר שכנים חיים:</p>
        <div class="flex items-center justify-center">
            <input type="number" id="golBirth" class="bg-gray-700 border border-gray-600 text-white text-center rounded-lg w-20 p-2">
        </div>
      </div>

      <div class="flex flex-col gap-2">
        <h3 class="font-semibold text-gray-300">הגדרת תא "חי"</h3>
        <p class="text-sm text-gray-400">אילו תאים ייחשבו 'חיים' בתחילת הסיבוב?</p>
        <select id="golLiveCellDef" class="bg-gray-700 border border-gray-600 text-white rounded-lg p-2">
          <option value="notDarkest">כל הצבעים פרט לכהה ביותר</option>
          <option value="notLightest">כל הצבעים פרט לבהיר ביותר</option>
          <option value="notDarkestAndLightest">כל הצבעים פרט לכהה והבהיר ביותר</option>
          <option value="topHalf">רק החצי הבהיר של הפלטה</option>
          <option value="bottomHalf">רק החצי הכהה של הפלטה</option>
        </select>
      </div>

      <div class="flex flex-col gap-2">
        <h3 class="font-semibold text-gray-300">גנטיקת צבעים</h3>
        <p class="text-sm text-gray-400">כיצד יקבע צבע של תא חדש?</p>
        <select id="golColorGenetics" class="bg-gray-700 border border-gray-600 text-white rounded-lg p-2">
          <option value="randomMix">שילוב גנטי אקראי (ברירת מחדל)</option>
          <option value="average">צבע ממוצע של ההורים</option>
          <option value="dominant">צבע ההורה הדומיננטי</option>
        </select>
      </div>

      <div class="flex justify-between items-center mt-4 border-t border-gray-700 pt-4">
        <button id="btnGolSettingsReset" class="text-gray-400 hover:text-white text-sm">איפוס לברירת מחדל</button>
        <div class="flex gap-4">
          <button id="btnGolSettingsCancel" class="bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg">ביטול</button>
          <button id="btnGolSettingsSave" class="bg-gold-500 hover:bg-gold-400 text-black font-bold py-2 px-4 rounded-lg" style="background-color: var(--gold);">שמור וסגור</button>
        </div>
      </div>

    </div>
  </div>
  <script src="app.js"></script>
</body>
</html>